{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport useSWR from 'swr';\nimport { BLOCKS, MARKS } from '@contentful/rich-text-types';\nimport { documentToReactComponents } from '@contentful/rich-text-react-renderer';\n\nconst fetcher = async url => {\n  try {\n    const response = await fetch(url);\n    return await response.json();\n  } catch (err) {\n    console.error(err);\n  }\n};\n\nexport const usePageContent = page => {\n  _s();\n\n  let obj = {};\n  const pageUrl = [process.env.CONTENTFUL_BASEURL, '/', process.env.CONTENTFUL_SPACE, '/entries', '?access_token=', process.env.CONTENTFUL_KEY, '&content_type=orionLocation', `&fields.page[in]=${page}`].join('');\n  const {\n    data,\n    error\n  } = useSWR(pageUrl, fetcher);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n\n  if (!data && !loading) {\n    setLoading(true);\n  } else if (data && loading) {\n    setLoading(false);\n  }\n\n  if (!loading) {\n    const {\n      title,\n      subtitle,\n      body: bodyObj,\n      button,\n      buttonLink,\n      buttonText\n    } = data.items[0].fields;\n    const body = documentToReactComponents(bodyObj);\n    obj = {\n      title,\n      subtitle,\n      body,\n      button,\n      buttonLink,\n      buttonText\n    };\n  }\n\n  return obj;\n};\n\n_s(usePageContent, \"Xc0l8PxyR+r6bAsd2q0s8z9GJH4=\", false, function () {\n  return [useSWR];\n});","map":{"version":3,"sources":["/Users/ml/dev/stellar/site/hooks/usePageContent.js"],"names":["useState","useSWR","BLOCKS","MARKS","documentToReactComponents","fetcher","url","response","fetch","json","err","console","error","usePageContent","page","obj","pageUrl","process","env","CONTENTFUL_BASEURL","CONTENTFUL_SPACE","CONTENTFUL_KEY","join","data","loading","setLoading","title","subtitle","body","bodyObj","button","buttonLink","buttonText","items","fields"],"mappings":";;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,OAAOC,MAAP,MAAmB,KAAnB;AACA,SAASC,MAAT,EAAiBC,KAAjB,QAA8B,6BAA9B;AACA,SAASC,yBAAT,QAA0C,sCAA1C;;AAEA,MAAMC,OAAO,GAAG,MAAMC,GAAN,IAAa;AAC3B,MAAI;AACF,UAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACF,GAAD,CAA5B;AACA,WAAO,MAAMC,QAAQ,CAACE,IAAT,EAAb;AACD,GAHD,CAGE,OAAOC,GAAP,EAAY;AACZC,IAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd;AACD;AACF,CAPD;;AASA,OAAO,MAAMG,cAAc,GAAGC,IAAI,IAAI;AAAA;;AACpC,MAAIC,GAAG,GAAG,EAAV;AACA,QAAMC,OAAO,GAAG,CACdC,OAAO,CAACC,GAAR,CAAYC,kBADE,EAEd,GAFc,EAGdF,OAAO,CAACC,GAAR,CAAYE,gBAHE,EAId,UAJc,EAKd,gBALc,EAMdH,OAAO,CAACC,GAAR,CAAYG,cANE,EAOd,6BAPc,EAQb,oBAAmBP,IAAK,EARX,EASdQ,IATc,CAST,EATS,CAAhB;AAUA,QAAM;AAAEC,IAAAA,IAAF;AAAQX,IAAAA;AAAR,MAAkBX,MAAM,CAACe,OAAD,EAAUX,OAAV,CAA9B;AACA,QAAM;AAAA,OAACmB,OAAD;AAAA,OAAUC;AAAV,MAAwBzB,QAAQ,CAAC,IAAD,CAAtC;;AACA,MAAI,CAACuB,IAAD,IAAS,CAACC,OAAd,EAAuB;AACrBC,IAAAA,UAAU,CAAC,IAAD,CAAV;AACD,GAFD,MAEO,IAAIF,IAAI,IAAIC,OAAZ,EAAqB;AAC1BC,IAAAA,UAAU,CAAC,KAAD,CAAV;AACD;;AACD,MAAI,CAACD,OAAL,EAAc;AACZ,UAAM;AAAEE,MAAAA,KAAF;AAASC,MAAAA,QAAT;AAAmBC,MAAAA,IAAI,EAAEC,OAAzB;AAAkCC,MAAAA,MAAlC;AAA0CC,MAAAA,UAA1C;AAAsDC,MAAAA;AAAtD,QAAqET,IAAI,CAACU,KAAL,CAAW,CAAX,EAAcC,MAAzF;AACA,UAAMN,IAAI,GAAGxB,yBAAyB,CAACyB,OAAD,CAAtC;AACAd,IAAAA,GAAG,GAAG;AAAEW,MAAAA,KAAF;AAASC,MAAAA,QAAT;AAAmBC,MAAAA,IAAnB;AAAyBE,MAAAA,MAAzB;AAAiCC,MAAAA,UAAjC;AAA6CC,MAAAA;AAA7C,KAAN;AACD;;AACD,SAAOjB,GAAP;AACD,CAzBM;;GAAMF,c;UAYaZ,M","sourcesContent":["import { useState } from 'react';\nimport useSWR from 'swr';\nimport { BLOCKS, MARKS } from '@contentful/rich-text-types';\nimport { documentToReactComponents } from '@contentful/rich-text-react-renderer';\n\nconst fetcher = async url => {\n  try {\n    const response = await fetch(url);\n    return await response.json();\n  } catch (err) {\n    console.error(err);\n  }\n};\n\nexport const usePageContent = page => {\n  let obj = {};\n  const pageUrl = [\n    process.env.CONTENTFUL_BASEURL,\n    '/',\n    process.env.CONTENTFUL_SPACE,\n    '/entries',\n    '?access_token=',\n    process.env.CONTENTFUL_KEY,\n    '&content_type=orionLocation',\n    `&fields.page[in]=${page}`,\n  ].join('');\n  const { data, error } = useSWR(pageUrl, fetcher);\n  const [loading, setLoading] = useState(true);\n  if (!data && !loading) {\n    setLoading(true);\n  } else if (data && loading) {\n    setLoading(false);\n  }\n  if (!loading) {\n    const { title, subtitle, body: bodyObj, button, buttonLink, buttonText } = data.items[0].fields;\n    const body = documentToReactComponents(bodyObj);\n    obj = { title, subtitle, body, button, buttonLink, buttonText };\n  }\n  return obj;\n};\n"]},"metadata":{},"sourceType":"module"}