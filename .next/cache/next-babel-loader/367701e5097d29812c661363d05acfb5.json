{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useScrollPosition } from '@n8tb1t/use-scroll-position';\nimport { isEqual } from 'lodash';\nexport const useActiveSection = (currentState, callback, defaultState, [...deps], [...sections]) => {\n  _s();\n\n  const last = sections.length - 1;\n\n  const effect = ({\n    currPos\n  }) => {\n    const {\n      y\n    } = currPos;\n    let toSet = defaultState;\n    let sameAsCurrent = false;\n\n    for (const [i, section] of sections.entries()) {\n      const [ref, stateObj] = section;\n\n      if (i === last) {\n        if (y < -ref.current.offsetTop) {\n          sameAsCurrent = isEqual(currentState, stateObj);\n          toSet = stateObj; //   if (!sameAsCurrent) {\n          //     toSet = stateObj;\n          //     break;\n          // callback(stateObj);\n          // break;\n        }\n      } else {\n        const [nextRef] = sections[i + 1];\n        console.log(y, -nextRef.current.offsetTop, -ref.current.offsetTop);\n\n        if (y >= -nextRef.current.offsetTop && y <= -ref.current.offsetTop) {\n          sameAsCurrent = isEqual(currentState, stateObj);\n          toSet = stateObj;\n        } //   if (!sameAsCurrent) {\n        //     break;\n        //     // callback(stateObj);\n        //     // break;\n        //   }\n        // } else {\n        //   sameAsCurrent = isEqual(currentState, defaultState);\n        //   //   if (!sameAsCurrent) {\n        //   //     callback(defaultState);\n        //   //     // break;\n        //   //   }\n        // }\n\n      }\n    }\n\n    if (!sameAsCurrent) {\n      callback(toSet);\n    }\n  };\n\n  return useScrollPosition(effect, deps);\n};\n\n_s(useActiveSection, \"7btWRCmSvoEA71UckleLRN3lIkw=\", false, function () {\n  return [useScrollPosition];\n});","map":{"version":3,"sources":["/Users/ml/dev/stellar/site/hooks/useActiveSection.js"],"names":["useScrollPosition","isEqual","useActiveSection","currentState","callback","defaultState","deps","sections","last","length","effect","currPos","y","toSet","sameAsCurrent","i","section","entries","ref","stateObj","current","offsetTop","nextRef","console","log"],"mappings":";;AAAA,SAASA,iBAAT,QAAkC,6BAAlC;AACA,SAASC,OAAT,QAAwB,QAAxB;AAEA,OAAO,MAAMC,gBAAgB,GAAG,CAC9BC,YAD8B,EAE9BC,QAF8B,EAG9BC,YAH8B,EAI9B,CAAC,GAAGC,IAAJ,CAJ8B,EAK9B,CAAC,GAAGC,QAAJ,CAL8B,KAM3B;AAAA;;AACH,QAAMC,IAAI,GAAGD,QAAQ,CAACE,MAAT,GAAkB,CAA/B;;AACA,QAAMC,MAAM,GAAG,CAAC;AAAEC,IAAAA;AAAF,GAAD,KAAiB;AAC9B,UAAM;AAAEC,MAAAA;AAAF,QAAQD,OAAd;AACA,QAAIE,KAAK,GAAGR,YAAZ;AACA,QAAIS,aAAa,GAAG,KAApB;;AACA,SAAK,MAAM,CAACC,CAAD,EAAIC,OAAJ,CAAX,IAA2BT,QAAQ,CAACU,OAAT,EAA3B,EAA+C;AAC7C,YAAM,CAACC,GAAD,EAAMC,QAAN,IAAkBH,OAAxB;;AACA,UAAID,CAAC,KAAKP,IAAV,EAAgB;AACd,YAAII,CAAC,GAAG,CAACM,GAAG,CAACE,OAAJ,CAAYC,SAArB,EAAgC;AAC9BP,UAAAA,aAAa,GAAGb,OAAO,CAACE,YAAD,EAAegB,QAAf,CAAvB;AACAN,UAAAA,KAAK,GAAGM,QAAR,CAF8B,CAG9B;AACA;AACA;AACA;AACA;AACD;AACF,OAVD,MAUO;AACL,cAAM,CAACG,OAAD,IAAYf,QAAQ,CAACQ,CAAC,GAAG,CAAL,CAA1B;AACAQ,QAAAA,OAAO,CAACC,GAAR,CAAYZ,CAAZ,EAAe,CAACU,OAAO,CAACF,OAAR,CAAgBC,SAAhC,EAA2C,CAACH,GAAG,CAACE,OAAJ,CAAYC,SAAxD;;AACA,YAAIT,CAAC,IAAI,CAACU,OAAO,CAACF,OAAR,CAAgBC,SAAtB,IAAmCT,CAAC,IAAI,CAACM,GAAG,CAACE,OAAJ,CAAYC,SAAzD,EAAoE;AAClEP,UAAAA,aAAa,GAAGb,OAAO,CAACE,YAAD,EAAegB,QAAf,CAAvB;AACAN,UAAAA,KAAK,GAAGM,QAAR;AACD,SANI,CAOL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACD;AACF;;AACD,QAAI,CAACL,aAAL,EAAoB;AAClBV,MAAAA,QAAQ,CAACS,KAAD,CAAR;AACD;AACF,GAxCD;;AA0CA,SAAOb,iBAAiB,CAACU,MAAD,EAASJ,IAAT,CAAxB;AACD,CAnDM;;GAAMJ,gB;UAkDJF,iB","sourcesContent":["import { useScrollPosition } from '@n8tb1t/use-scroll-position';\nimport { isEqual } from 'lodash';\n\nexport const useActiveSection = (\n  currentState,\n  callback,\n  defaultState,\n  [...deps],\n  [...sections],\n) => {\n  const last = sections.length - 1;\n  const effect = ({ currPos }) => {\n    const { y } = currPos;\n    let toSet = defaultState;\n    let sameAsCurrent = false;\n    for (const [i, section] of sections.entries()) {\n      const [ref, stateObj] = section;\n      if (i === last) {\n        if (y < -ref.current.offsetTop) {\n          sameAsCurrent = isEqual(currentState, stateObj);\n          toSet = stateObj;\n          //   if (!sameAsCurrent) {\n          //     toSet = stateObj;\n          //     break;\n          // callback(stateObj);\n          // break;\n        }\n      } else {\n        const [nextRef] = sections[i + 1];\n        console.log(y, -nextRef.current.offsetTop, -ref.current.offsetTop);\n        if (y >= -nextRef.current.offsetTop && y <= -ref.current.offsetTop) {\n          sameAsCurrent = isEqual(currentState, stateObj);\n          toSet = stateObj;\n        }\n        //   if (!sameAsCurrent) {\n        //     break;\n        //     // callback(stateObj);\n        //     // break;\n        //   }\n        // } else {\n        //   sameAsCurrent = isEqual(currentState, defaultState);\n        //   //   if (!sameAsCurrent) {\n        //   //     callback(defaultState);\n        //   //     // break;\n        //   //   }\n        // }\n      }\n    }\n    if (!sameAsCurrent) {\n      callback(toSet);\n    }\n  };\n\n  return useScrollPosition(effect, deps);\n};\n"]},"metadata":{},"sourceType":"module"}