{"ast":null,"code":"import { useScrollPosition } from '@n8tb1t/use-scroll-position';\nimport { isEqual } from 'lodash';\nexport const useActiveSection = (currentState, callback, [...deps], [...sections]) => {\n  const last = sections.length - 1;\n\n  const effect = ({\n    currPos\n  }) => {\n    const {\n      y\n    } = currPos;\n\n    for (const [i, section] of sections.entries()) {\n      const [ref, stateObj] = section;\n\n      if (i === last) {\n        if (y < -ref.current.offsetTop) {\n          const sameAsCurrent = isEqual(currentState, stateObj);\n\n          if (!sameAsCurrent) {\n            callback(stateObj);\n            break;\n          }\n        }\n      } else {\n        const [nextRef] = sections[i + 1];\n\n        if (y >= nextRef.current.offsetTop && y <= -ref.current.offsetTop) {\n          const sameAsCurrent = isEqual(currentState, stateObj);\n\n          if (!sameAsCurrent) {\n            callback(stateObj);\n            break;\n          }\n        }\n      }\n    }\n  };\n\n  return useScrollPosition(effect, [...deps]);\n};","map":{"version":3,"sources":["/Users/ml/dev/stellar/site/hooks/useActiveSection.js"],"names":["useScrollPosition","isEqual","useActiveSection","currentState","callback","deps","sections","last","length","effect","currPos","y","i","section","entries","ref","stateObj","current","offsetTop","sameAsCurrent","nextRef"],"mappings":"AAAA,SAASA,iBAAT,QAAkC,6BAAlC;AACA,SAASC,OAAT,QAAwB,QAAxB;AAEA,OAAO,MAAMC,gBAAgB,GAAG,CAACC,YAAD,EAAeC,QAAf,EAAyB,CAAC,GAAGC,IAAJ,CAAzB,EAAoC,CAAC,GAAGC,QAAJ,CAApC,KAAsD;AACpF,QAAMC,IAAI,GAAGD,QAAQ,CAACE,MAAT,GAAkB,CAA/B;;AACA,QAAMC,MAAM,GAAG,CAAC;AAAEC,IAAAA;AAAF,GAAD,KAAiB;AAC9B,UAAM;AAAEC,MAAAA;AAAF,QAAQD,OAAd;;AACA,SAAK,MAAM,CAACE,CAAD,EAAIC,OAAJ,CAAX,IAA2BP,QAAQ,CAACQ,OAAT,EAA3B,EAA+C;AAC7C,YAAM,CAACC,GAAD,EAAMC,QAAN,IAAkBH,OAAxB;;AACA,UAAID,CAAC,KAAKL,IAAV,EAAgB;AACd,YAAII,CAAC,GAAG,CAACI,GAAG,CAACE,OAAJ,CAAYC,SAArB,EAAgC;AAC9B,gBAAMC,aAAa,GAAGlB,OAAO,CAACE,YAAD,EAAea,QAAf,CAA7B;;AACA,cAAI,CAACG,aAAL,EAAoB;AAClBf,YAAAA,QAAQ,CAACY,QAAD,CAAR;AACA;AACD;AACF;AACF,OARD,MAQO;AACL,cAAM,CAACI,OAAD,IAAYd,QAAQ,CAACM,CAAC,GAAG,CAAL,CAA1B;;AACA,YAAID,CAAC,IAAIS,OAAO,CAACH,OAAR,CAAgBC,SAArB,IAAkCP,CAAC,IAAI,CAACI,GAAG,CAACE,OAAJ,CAAYC,SAAxD,EAAmE;AACjE,gBAAMC,aAAa,GAAGlB,OAAO,CAACE,YAAD,EAAea,QAAf,CAA7B;;AACA,cAAI,CAACG,aAAL,EAAoB;AAClBf,YAAAA,QAAQ,CAACY,QAAD,CAAR;AACA;AACD;AACF;AACF;AACF;AACF,GAvBD;;AAyBA,SAAOhB,iBAAiB,CAACS,MAAD,EAAS,CAAC,GAAGJ,IAAJ,CAAT,CAAxB;AACD,CA5BM","sourcesContent":["import { useScrollPosition } from '@n8tb1t/use-scroll-position';\nimport { isEqual } from 'lodash';\n\nexport const useActiveSection = (currentState, callback, [...deps], [...sections]) => {\n  const last = sections.length - 1;\n  const effect = ({ currPos }) => {\n    const { y } = currPos;\n    for (const [i, section] of sections.entries()) {\n      const [ref, stateObj] = section;\n      if (i === last) {\n        if (y < -ref.current.offsetTop) {\n          const sameAsCurrent = isEqual(currentState, stateObj);\n          if (!sameAsCurrent) {\n            callback(stateObj);\n            break;\n          }\n        }\n      } else {\n        const [nextRef] = sections[i + 1];\n        if (y >= nextRef.current.offsetTop && y <= -ref.current.offsetTop) {\n          const sameAsCurrent = isEqual(currentState, stateObj);\n          if (!sameAsCurrent) {\n            callback(stateObj);\n            break;\n          }\n        }\n      }\n    }\n  };\n\n  return useScrollPosition(effect, [...deps]);\n};\n"]},"metadata":{},"sourceType":"module"}